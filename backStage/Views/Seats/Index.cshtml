@{
    Layout = "_Layout";

    /* === 想改排數、列數在這裡改 === */
    int rowCount = 12;   // 座位排數
    int seatsPerRow = 25;  // 每排座位數
}
@section Styles{
    <style>
        .full-height{ height:calc(100vh - 6rem); }

    </style>
}
<!-- ▽▽ 頁面本體 ▽▽ -->
<div class="container-fluid p-3 h-100">
    <div class="row gx-3 full-height mx-auto">

        <!-- 左側設定表單 -->
        <div class="col-12 col-md-3 col-lg-2 d-flex flex-column h-md-100 mb-3 mb-md-0">
            <div class="card flex-fill">
                <div class="card-body d-flex flex-column">
                    <form asp-action="Create" asp-controller="Seats">
                        <div class="mb-3">
                            <label class="form-label">影廳名稱</label>
                            <select class="form-select">
                                <option value="">請選擇影廳</option>
                                <option>A</option>
                                <option>B</option>
                                <option>C</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">影廳類型</label>
                            <select class="form-select">
                                <option value="">請選擇影廳類型</option>
                                <option>2D</option>
                                <option>3D</option>
                                <option>IMAX</option>
                            </select>
                        </div>
                        <div class="mt-auto d-grid">
                            <button class="btn btn-primary">儲存影廳</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- 右側座位表 -->
        <div class="col-12 col-md-9 col-lg-10 d-flex flex-column h-md-100 seat-col">
            <div class="card flex-fill">
                <div class="card-header">座位表</div>
                <div class="card-body p-0 d-flex flex-column">

                    <!-- 座位區（可水平捲動） -->
                    <div class="seats-wrapper">
                        <div class="row-container">

                            <!-- 螢幕示意圖 -->
                            <div class="movie-screen">
                                <img src="~/images/img/screen-thumb.png" alt="screen" />
                            </div>

                            <!-- 座位動態產生 -->
                            @for (int r = 0; r < rowCount; r++)
                            {
                                <div class="seat-row">
                                    @for (int c = 0; c < seatsPerRow; c++)
                                    {
                                        <div class="seat"></div>
                                    }
                                </div>
                            }

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- ▽▽ 點選變色腳本 ▽▽ -->
@section Scripts {
    <script>
        const seatWrapper  = document.querySelector('.seats-wrapper');
        seatWrapper.addEventListener('click', e=>{
            if(!e.target.classList.contains('seat') ||
               e.target.classList.contains('occupied')) return;
            e.target.classList.toggle('selected');
        });
    </script>
}
